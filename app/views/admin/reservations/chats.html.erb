<% @page_title = "チャット履歴 (予約ID: #{@reservation.id})" %>
<h1><%= @page_title %></h1>

<div class="info-box">
	<p><strong>予約者:</strong> <%= @reservation.member.name %></p>
	<p><strong>対象者:</strong> <%= @reservation.target_member.name %></p>
</div>

<div class="chat-history">
	<% if @chats.present? %>
		<% @chats.each do |chat| %>
			<div class="message">
				<p>
					<strong><%= chat.member.name %></strong> 
					<small class="message-meta"><%= chat.created_at.strftime("%Y/%m/%d %H:%M") %></small>
				</p>
				<p class="message-content"><%= simple_format(chat.content) %></p>
				<div>
					<%= link_to "削除", admin_chat_path(chat), method: :delete, 
					data: { confirm: "このメッセージを削除してよろしいですか？" }, 
					class: "btn-outline-danger btn-sm" %>
				</div>
			</div>
		<% end %>
  	<% else %>
		<p>チャットのやり取りはまだありません。</p>
  	<% end %>
</div>

<div class="actions mt-20">
	<%= link_to "予約詳細へ戻る", admin_reservation_path(@reservation) %> |
	<%= link_to "予約一覧へ", admin_reservations_path %>
</div>
